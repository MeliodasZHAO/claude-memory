---
name: claude-memory
description: åŸºäºç”¨æˆ·ç”»åƒå’Œç»“æ„åŒ–è®°å¿†æä¾›ä¸ªæ€§åŒ–å¯¹è¯ã€‚å½“ç”¨æˆ·è¯¢é—®ä¸ªäººä¿¡æ¯ï¼ˆ"æˆ‘æ˜¯è°"ã€"æˆ‘åœ¨å“ª"ã€"æˆ‘åœ¨åšä»€ä¹ˆ"ï¼‰ã€éœ€è¦ä¸ªæ€§åŒ–å›åº”ã€æˆ–å¸Œæœ› AI è®°ä½å¹¶å¼•ç”¨å†å²ä¿¡æ¯æ—¶ï¼Œä¸»åŠ¨ä½¿ç”¨æ­¤ skillã€‚æ­¤ skill åº”è¯¥è¢«é¢‘ç¹ä½¿ç”¨ä»¥æä¾›æ›´å¥½çš„ä¸ªæ€§åŒ–ä½“éªŒã€‚
allowed-tools: Read, Grep, Glob, Bash
---

# Claude Memory

è®© Claude æ‹¥æœ‰å…³äºä½ çš„é•¿æœŸè®°å¿†

## é¦–æ¬¡ä½¿ç”¨å¼•å¯¼

å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡æ¿€æ´»æ­¤skillæ—¶ï¼ŒæŒ‰ä»¥ä¸‹æµç¨‹å¼•å¯¼ï¼š

### 1. æ£€æµ‹æ˜¯å¦é¦–æ¬¡ä½¿ç”¨

```python
from pathlib import Path
SKILL_DIR = Path.home() / ".claude/skills/claude-memory"
config_dir = SKILL_DIR / "user-data" / "config"  
user_persona = config_dir / "user-persona.md"
is_first_time = not user_persona.exists() or user_persona.stat().st_size < 100
```

### 2. æ¬¢è¿å¹¶è¯¢é—®ç”¨æˆ·åå¥½

å¦‚æœæ˜¯é¦–æ¬¡ä½¿ç”¨ï¼Œå‹å¥½åœ°è¯¢é—®ï¼š

```
ğŸ‘‹ æ¬¢è¿ä½¿ç”¨ Claude Memoryï¼

è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨è¿™ä¸ªæŠ€èƒ½ã€‚æˆ‘å¯ä»¥è®°ä½ä½ çš„èƒŒæ™¯ã€åå¥½å’Œç»å†ï¼Œè®©æˆ‘ä»¬çš„å¯¹è¯æ›´åŠ ä¸ªæ€§åŒ–ã€‚

ä½ å¸Œæœ›ç°åœ¨å®Œå–„ä¸ªäººä¿¡æ¯å—ï¼Ÿ

1ï¸âƒ£ æ˜¯çš„ï¼Œç°åœ¨è®¾ç½®ï¼ˆæ¨èï¼‰  
2ï¸âƒ£ ç¨åè®¾ç½®

è¯·é€‰æ‹©ï¼š
```

### 3a. å¼•å¯¼å¼è®¾ç½®

å¦‚æœç”¨æˆ·é€‰æ‹©"ç°åœ¨è®¾ç½®"ï¼š

1. è¿è¡Œ `python scripts/setup_directories.py` åˆ›å»ºç›®å½•ç»“æ„
2. é€šè¿‡å¯¹è¯æ”¶é›†ä¿¡æ¯ï¼ˆèŒä¸šã€æ‰€åœ¨åœ°ã€å…´è¶£ã€æ²Ÿé€šåå¥½ç­‰ï¼‰
3. åŸºäºå¯¹è¯ç”Ÿæˆ `user-persona.md`
4. æ¨èå¹¶ç”ŸæˆåŒ¹é…çš„ `ai-persona.md`
5. è¯¢é—®æ˜¯å¦æœ‰ç°æœ‰ç¬”è®°è¦å¤„ç†
6. å®Œæˆåå‹å¥½æç¤º

### 3b. å»¶è¿Ÿè®¾ç½®

å¦‚æœç”¨æˆ·é€‰æ‹©"ç¨å"ï¼š

```
å¥½çš„ï¼ä½ å¯ä»¥éšæ—¶è¯´"å¸®æˆ‘è®¾ç½® Claude Memory"æ¥å¼€å§‹ã€‚

åœ¨è®¾ç½®å‰ï¼Œæˆ‘ä¼šä»¥é€šç”¨æ¨¡å¼ä¸ä½ å¯¹è¯ã€‚
```

## æ ¸å¿ƒåŠŸèƒ½

### ä¸‰å±‚è®°å¿†æ¶æ„

1. **ç»“æ„åŒ–è®°å¿†** (`user-data/memory/`)  
   - facts.json: äº‹å®ä¿¡æ¯
   - preferences.json: åå¥½ä¹ æƒ¯
   - experiences.json: ç»å†äº‹ä»¶

2. **åŸå§‹ç¬”è®°** (`user-data/notes/`)
   - å®Œæ•´å†å²ï¼ŒçœŸå®æ¥æº

3. **æ™ºèƒ½æ€»ç»“** (`user-data/summaries/`)  
   - æœˆåº¦/ä¸»é¢˜æ€»ç»“

### è®°å¿†ç‰ˆæœ¬æ§åˆ¶

- æ–°è®°å¿†å¯ä»¥æ›¿æ¢æ—§è®°å¿†ï¼ˆsupersedeså­—æ®µï¼‰
- æ—§è®°å¿†æ ‡è®°ä¸ºdeprecatedï¼Œä¿ç•™å†å²
- è‡ªåŠ¨å†²çªæ£€æµ‹

## ä½¿ç”¨æ–¹æ³•

åœ¨å¯¹è¯ä¸­åŠ è½½ç”»åƒå’Œè®°å¿†ï¼š

```python
from memory_manager import MemoryManager
mm = MemoryManager()

# è·å–å½“å‰è®°å¿†  
facts = mm.get_active_facts()
preferences = mm.get_active_preferences()
experiences = mm.get_active_experiences()
```

æ£€ç´¢ç›¸å…³ç¬”è®°ï¼š

```python
from vector_query import get_relevant_notes
notes = get_relevant_notes(query, top_k=5)
```

## é‡è¦æç¤º

- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ ~/.claude/skills/claude-memory/user-data/
- å…¨å±€å…±äº«ï¼Œæ‰€æœ‰é¡¹ç›®å¯è®¿é—®
- è‡ªç„¶å¼•ç”¨è®°å¿†ï¼Œä¸è¦è¯´"æ ¹æ®è®°å½•..."
- å®šæœŸæå–æ–°ç¬”è®°çš„è®°å¿†
- æ£€æµ‹å†²çªå¹¶åŠæ—¶æ›´æ–°

è¯¦è§ README.md
